
% Due thursday

\documentclass{article}

\usepackage[utf8]{inputenc}

\usepackage{amsmath, bm}
\usepackage{graphicx}
\usepackage{amssymb}
\usepackage{float}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{hyperref}
\usepackage{tikz}
\usepackage{layout}
\usepackage[export]{adjustbox}

\usepackage[margin=1in]{geometry}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{color, colortbl}
\usepackage{textgreek}
\usepackage{mathrsfs}
\usepackage{savetrees}


\setlength{\parskip}{\baselineskip}%
\setlength{\parindent}{0pt}%
\linespread{0.9}


\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\lstset{style=mystyle}



\begin{document}

\title{SA1: Wing Analysis Final Report}
\author{lwp26}
\date{June 2024}
\maketitle 

\section{Introduction}
\subsection{Purpose}

\subsection{Objectives}

\section{Development of Software Tool}

\subsection{Panel Method}

Many of the panel method functions could be vectorized to improve performance.
\subsubsection{Single Panel}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.3\textwidth]{figures/single_panel.jpg}
    \caption{Single Panel}
    \label{fig:single_panel}
\end{figure}
The streamfunction due to a linearly distributed vortex panel is given by
\begin{equation}
    \psi(X,Y) = \gamma_a f_a + \gamma_b f_b
\end{equation}
where $f_a$ and $f_b$ are influence coefficients of the panel at points $a$ and $b$ respectively.
The influence functions can be found by integrating the Biot-Savart law over the panel.

A function is written to calculate the influence coefficients for a vector of panel points.


\subsection{Boundary Layer Solver}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.2\textwidth]{figures/bl_solver_flowchart.png}
    \caption{Boundary Layer Profile}
    \label{fig:BL}
\end{figure}

\subsubsection{Laminar Regime}

Test for transition to turbulence
\begin{equation}
    \ln(Re_\theta) = 18.4 H_E - 21.74 \quad \text{ where } \quad Re_\theta = Re_L\left( \frac{u_e}{U} \right) \left( \frac{\theta}{L} \right)
\end{equation}

\begin{equation}
    m = - \frac{\theta^2}{\mu}\frac{du_e}{dx} = -Re_L \left( \frac{\theta}{L} \right)^2 \frac{d(u_e / U)}{d(x/L)}
\end{equation}

If $m > 0.09$, then the laminar boundary layer seperates and is treated as turbulent.

\subsubsection{Turbulent Regime}

\begin{equation}
    \dot{\mathbf{y}} = \begin{bmatrix}
        \frac{d \theta}{d x} \\[5pt]
        \frac{d \delta_E}{d x}
    \end{bmatrix} = f(x,\mathbf{y}) = \begin{bmatrix}
        \frac{c_f}{2} - \frac{H+2}{u_e}\frac{d u_e}{d x} \theta \\[5pt]
        c_\text{diss} - \frac{3}{u_e} \frac{d \delta_E}{d x} \delta_E
    \end{bmatrix}
\end{equation}

\begin{align}
    H &= \begin{cases}
        \frac{11 H_E + 15}{48H_E - 59} & \text{if } H_E  \ge 1.46 \\
        2.803 & \text{if } H_E < 1.46
    \end{cases} \\
    c_f &= 0.091416\left[(H-1)Re_\theta \right]^{-0.232}e^{-1.26H} \\
    c_\text{diss} &= 0.010024\left[(H-1)Re_\theta \right]^{1/6}
\end{align}

\section{Software Performance}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.6\textwidth]{figures/RePanelVec_times.eps}
    \caption{Computation time for NACA 0012 airfoil for varying number of panels, low and high Reynolds numbers, vectorized and loop algorithms at $\alpha = 5^\circ$}
    \label{fig:airfoil}
\end{figure}


\begin{figure}[H]
    \centering
    \captionsetup{justification=centering}
    \begin{subfigure}{0.45\textwidth}
        \includegraphics[width=0.99\textwidth]{figures/NACA0012_lift_validation.png}
        \caption{Lift coefficient against angle of attack}
        \label{fig:0012_lift_validation}
    \end{subfigure}
    \begin{subfigure}{0.45\textwidth}
        \centering
        \includegraphics[width=0.99\textwidth]{figures/NACA0012_drag_validation.png}
        \caption{Drag coefficient against lift coefficient}
        \label{fig:0012_drag_validation}
    \end{subfigure}
    \caption{Experimetnal and calculated performance at $Re = 3\times10^6$ for the NACA0012 aerofoil}
\end{figure}

\begin{figure}[H]
    \centering
    \captionsetup{justification=centering}
    \begin{subfigure}{0.45\textwidth}
        \includegraphics[width=0.9\textwidth]{figures/NACA4412_lift_validation.png}
        \caption{Lift coefficient against angle of attack}
        \label{fig:4412_lift_validation}
    \end{subfigure}
    \begin{subfigure}{0.45\textwidth}
        \centering
        \includegraphics[width=0.9\textwidth]{figures/NACA4412_drag_validation.png}
        \caption{Drag coefficient against lift coefficient}
        \label{fig:4412_drag_validation}
    \end{subfigure}
    \caption{Experimetnal and calculated performance at $Re = 3\times10^6$ for the NACA4412 aerofoil}
\end{figure}

\section{Topology Optimization}

\subsection{Changing Topology}

A spline fit tool is used to paramaterize complex curves with a small number of control points.
The calculated lift and drag coefficients are very sensitive to control point position.

A Naca 0012 airfoil is used as a starting point to gain insight into the effect of changing the airfoil shape on performance.

\subsection{High Reynolds Number}

The first changes made to the initial NACA 0012 airfoil were increasing curvature of the top surface.
This was done first all along the airfoil, then only in the region of the leading edge.
This can be seen below in figure \ref{fig:v5_geometry} and the performance in figure \ref{fig:v5_lod}.

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/hiRe_geometry_5.eps}
    \caption{Airfoil Geometry of first 5 design iterations}
    \label{fig:v5_geometry}
\end{figure}

\begin{figure}[H]
    \centering
    \begin{subfigure}{0.45\textwidth}
        \centering
        \includegraphics[width=1.2\textwidth, center]{figures/hiRe_lod_5.eps}
        \caption{Airfoil}
        \label{fig:v5_lod}
    \end{subfigure}
    \begin{subfigure}{0.54\textwidth}
        \centering
        \includegraphics[width=0.99\textwidth]{figures/hiRe_upperprofile_5_a5.eps}
        \caption{Pressure coefficient and momentum thickness profiles for $\alpha = 5^\circ$}
        \label{fig:v5_uprofile}
    \end{subfigure}
    \caption{Performance of initial 5 design iterations and their upper surface boundary layer profiles}
\end{figure}

Figure \ref{fig:v5_uprofile} shows that these changes have a significant effect on the shape of the suction peak.
For maximum lift the area enclosed by the upper surface pressure coefficient profile should be minimised.
This means that the suction peak area should be maximised.
Version 2 had a 10\% higher lift coefficient which resulted in a higher lift to drag ratio seen in figure \ref{fig:v5_lod}.
All of versions 3 4 and 5 consisted of variations of the leading edge curvature which had worse lift to drag ratios.
This did move the suction peak further back along the upper surface but due to an increased gradient behind the peak,
the area enclosed by the profile was decreased overall.
A thinner version 5 produced a lift coefficient 11\% lower than the initial NACA 0012 airfoil.

Changes were then made to upper surface to ensure its convex to prevent adverse pressure gradients and increase area enclosed by the suction peak.
This can be seen in figure \ref{fig:v9_geometry} and the performance in figure \ref{fig:v9_lod}.

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/hiRe_geometry_9.eps}
    \caption{Airfoil Geometry}
    \label{fig:v9_geometry}
\end{figure}

\begin{figure}[H]
    \centering
    \begin{subfigure}{0.45\textwidth}
        \centering
        \includegraphics[width=1.2\textwidth, center]{figures/hiRe_lad_9.eps}
        \caption{Airfoil}
        \label{fig:v9_lad}
    \end{subfigure}
    \begin{subfigure}{0.54\textwidth}
        \centering
        \includegraphics[width=0.99\textwidth]{figures/hiRe_upperprofile_9_a3.eps}
        \caption{Pressure coefficient and momentum thickness profiles for $\alpha = 3^\circ$}
        \label{fig:v9_uprofile}
    \end{subfigure}
    \caption{Performance of design iterations 6-9 and their upper surface boundary layer profiles}
\end{figure}

This change shows a higher lift achieved as the low pressure coefficient is maintained by the convex upper surface.
The drag coefficient curves for many designs in figure \ref{fig:v9_lad} show a sudden increase at varying angles of attack.
This is due to the point of transition to turbulence jumping forward on the upper surface with the increased angle of attack.
An earlier transition point means that the boundary layer can grow to be significantly thicker, increasing the drag of the aerofoil.
However, the NACA0012 demonstrates that early transition with small adverse pressure gradients can also produce lower drag coefficients.

Attempts were made to smooth the upper surface to prevent jumps in the transition point for a robust aerofoil design.
These can occur if there are too many closely spaced control points which can create a zig-zag shape, producing alternating favourable and adverse pressure gradients.
Small variations increasing the radius of curvature produced an even larger enclosed area by the suction peak and hence higher lift,
but at the cost of an increased pressure gradient behind the peak and hence higher drag (Versions 7 and 8).

Changes to the lower surface were then considered.
The lower surface was flattened to remove the adverse pressure gradient and increase pressure coefficient on the bottom surface to increase lift.

\begin{figure}[H]
    \begin{subfigure}{0.54\textwidth}
        \centering
        \includegraphics[width=1.2\textwidth, center]{figures/hiRe_geometry_14.eps}
        \caption{Airfoil Geometry}
        \label{fig:v14_geometry}
    \end{subfigure}
    \begin{subfigure}{0.45\textwidth}
        \centering
        \includegraphics[width=1.2\textwidth, center]{figures/hiRe_lod_14.eps}
        \caption{Drag polar and lift to drag ratio against angle of attack}
        \label{fig:v14_lod}
    \end{subfigure}
    \caption{}
\end{figure}

\begin{figure}[H]
    \begin{subfigure}{0.49\textwidth}
        \centering
        \includegraphics[width=1.1\textwidth, center]{figures/hiRe_upperprofile_14_a7.eps}
        \label{fig:v14_uprofile}
    \end{subfigure}
    \begin{subfigure}{0.49\textwidth}
        \centering
        \includegraphics[width=1.1\textwidth, center]{figures/hiRe_lowerprofile_14_a7.eps}
        \label{fig:v14_lprofile}
    \end{subfigure}
    \caption{Upper and lower surface pressure coefficient and momentum thickness profiles for $\alpha = 7^\circ$}
\end{figure}

This improved pressure on the bottom surface and moved transition along which is two desired effects.
Also improved the lift generated on the top surface in a relatively unexpected manner since we didn't change this.
idea moves stagnation point down which increases streamline curvature around top and achieves lower cp on top (more lift)

Changed lower trailing edge to be a tiny bit convex and it was previously concave. 
Approaching concave we get favourable pressure gradient helping to move transition along. 
At concave part we get higher pressures (which for bottom surface increases lift).
Boundary layer turbulent at this point and isn't too badly affected at end. 
Trying to extend concavity further we increased drag as transition occurred earlier. (Approached adverse pressure gradient sooner)


\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/hiRe_geometry_17.eps}
    \caption{Airfoil}
    \label{fig:v17_geometry}
\end{figure}

\begin{figure}[H]
    \centering
    \begin{subfigure}{0.45\textwidth}
        \centering
        \includegraphics[width=1.2\textwidth, center]{figures/hiRe_lod_17.eps}
        \caption{Airfoil}
        \label{fig:v17_lod}
    \end{subfigure}
    \begin{subfigure}{0.54\textwidth}
        \centering
        \includegraphics[width=0.99\textwidth]{figures/hiRe_lowerprofile_17_a7.eps}
        \caption{Pressure coefficient and momentum thickness profiles for $\alpha = 7^\circ$}
        \label{fig:v17_lprofile}
    \end{subfigure}
    \caption{Performance of design iterations 14-17 and their upper surface boundary layer profiles}
\end{figure}

\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{figures/hiRe_geometry_21.eps}
    \caption{Airfoil}
    \label{fig:v21_geometry}
\end{figure}

\begin{figure}[H]
    \centering
    \begin{subfigure}{0.45\textwidth}
        \centering
        \includegraphics[width=1.2\textwidth, center]{figures/hiRe_lod_21.eps}
        \caption{Airfoil}
        \label{fig:v21_lod}
    \end{subfigure}
    \begin{subfigure}{0.54\textwidth}
        \centering
        \includegraphics[width=0.6\textwidth]{figures/hiRe_upperprofile_21_a7.eps}
        \caption{Pressure coefficient and momentum thickness profiles for $\alpha = 7^\circ$}
        \label{fig:v21_uprofile}
    \end{subfigure}
    \caption{Performance of design iterations 14-17 and their upper surface boundary layer profiles}
\end{figure}

\subsection{Low Reynolds Number}


\end{document}